Tables,Indices,Views,Triggers

‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡πà‡∏≤ ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ / ‡∏ï‡∏≤‡∏£‡∏≤‡∏á / ‡∏î‡∏±‡∏ä‡∏ô‡∏µ / ‡∏ß‡∏¥‡∏ß / ‡∏ó‡∏£‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå ‡∏ó‡∏µ‡πà‡∏ú‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô admin_schema.sql ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏≠‡∏∞‡πÑ‡∏£ ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡∏ö‡πâ‡∏≤‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏´‡πá‡∏ô‡∏†‡∏≤‡∏û‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô

üìÇ Tables (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å)
1. administrators

‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö (Admin)

‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå:

username : ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô

email : ‡∏≠‡∏µ‡πÄ‡∏°‡∏•

password_hash : ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏ß‡πâ (bcrypt/argon2)

role : ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå ‡πÄ‡∏ä‡πà‡∏ô superadmin, editor, analyst

is_active : ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

created_at, updated_at : ‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

2. login_history

‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏≠‡∏≠‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô

‡∏°‡∏µ admin_id, ‡πÄ‡∏ß‡∏•‡∏≤ login/logout, ip_hash, user_agent

3. lessons

‡πÄ‡∏Å‡πá‡∏ö‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô/‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ

‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: title, slug, content, status (draft/published), cover_image, tags

4. media_assets

‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå/‡∏£‡∏π‡∏õ/‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î

‡∏ü‡∏¥‡∏•‡∏î‡πå: file_name, file_path, file_type, linked_to (lesson, quiz, map), linked_id (id ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏±‡πâ‡∏ô)

5. quizzes

‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡∏∏‡∏î‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö

‡∏ü‡∏¥‡∏•‡∏î‡πå: title, slug, settings (‡πÄ‡∏Å‡πá‡∏ö JSON ‡πÄ‡∏ä‡πà‡∏ô ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ, shuffle ‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö)

6. quiz_questions

‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö

‡∏ü‡∏¥‡∏•‡∏î‡πå: qtype (‡∏ä‡∏ô‡∏¥‡∏î ‡πÄ‡∏ä‡πà‡∏ô mcq = choice, truefalse = ‡∏ñ‡∏π‡∏Å/‡∏ú‡∏¥‡∏î), question, choices (JSON), answer_key

7. quiz_attempts

‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

‡∏ü‡∏¥‡∏•‡∏î‡πå: quiz_id, visitor_id (‡∏´‡∏£‡∏∑‡∏≠ user_id), answers (JSON), score, finished_at

8. learning_map

‡πÄ‡∏Å‡πá‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ (Map-based Navigation)

‡∏ü‡∏¥‡∏•‡∏î‡πå: graph_json (‡πÄ‡∏Å‡πá‡∏ö nodes/edges/style ‡πÄ‡∏õ‡πá‡∏ô JSON), is_active (‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà)

9. visitors

‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏° (‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≤‡∏∞‡∏à‡∏á‡∏ï‡∏±‡∏ß‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•)

‡∏ü‡∏¥‡∏•‡∏î‡πå: visitor_id (UUID ‡∏à‡∏≤‡∏Å cookie), ip_hash (‡∏Ñ‡πà‡∏≤ hash ‡∏Ç‡∏≠‡∏á IP ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏•‡∏∞‡πÄ‡∏°‡∏¥‡∏î privacy), last_seen

10. activity_log

‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà admin ‡∏ó‡∏≥ ‡πÄ‡∏ä‡πà‡∏ô create_lesson, update_map, publish_quiz

‡∏ü‡∏¥‡∏•‡∏î‡πå: type, ref_table, ref_id, admin_id, detail

üîç Indices (‡∏î‡∏±‡∏ä‡∏ô‡∏µ)

idx_admin_active : ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ admin ‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ is_active ‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô

idx_login_admin_time : ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ login ‡∏ï‡∏≤‡∏° admin ‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤

idx_lessons_status : filter ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏≤‡∏° status (draft/published)

idx_lessons_updated : sort ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏≤‡∏° updated_at

idx_media_link : ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ media ‡∏ï‡∏≤‡∏°‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ú‡∏π‡∏Å‡∏≠‡∏¢‡∏π‡πà (lesson, quiz, map)

idx_quizzes_status, idx_quizzes_updated : filter/sort quiz ‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞/‡πÄ‡∏ß‡∏•‡∏≤

idx_questions_quiz : ‡∏î‡∏∂‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ï‡∏≤‡∏° quiz_id

idx_attempts_quiz, idx_attempts_visitor : filter attempt ‡∏ï‡∏≤‡∏° quiz ‡∏´‡∏£‡∏∑‡∏≠ visitor

idx_map_active : ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà active ‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß

idx_visitors_last_seen : ‡∏î‡∏π‡∏ú‡∏π‡πâ‡∏ä‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î/active ‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß

idx_activity_time : ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î

üëÅÔ∏è Views (‡∏ß‡∏¥‡∏ß ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Dashboard)

vw_dashboard_counts
‚Üí ‡∏£‡∏ß‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏™‡∏£‡∏∏‡∏õ ‡πÄ‡∏ä‡πà‡∏ô ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏ä‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î, ‡∏ú‡∏π‡πâ‡∏ä‡∏°‡∏ó‡∏µ‡πà active, ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î, ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

vw_recent_activity
‚Üí ‡∏î‡∏∂‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏à‡∏≤‡∏Å activity_log 20 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£

‚öôÔ∏è Triggers (‡∏ó‡∏£‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå)

trg_admin_updated_at : ‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç admin ‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï updated_at ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

trg_lessons_updated_at : ‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï updated_at

trg_quizzes_updated_at : ‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç quiz ‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï updated_at

trg_questions_updated_at : ‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï updated_at

trg_map_updated_at : ‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà ‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï updated_at

trg_visitors_touch : ‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç visitor ‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï last_seen ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

‚úÖ ‡∏™‡∏£‡∏∏‡∏õ:

Tables = ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å (admin, login, lessons, media, quizzes, questions, attempts, map, visitors, activity)

Indices = ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠ sort ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô

Views = ‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏£‡∏∏‡∏õ ‡πÉ‡∏ä‡πâ‡πÇ‡∏ä‡∏ß‡πå‡πÉ‡∏ô Dashboard

Triggers = ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï updated_at ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç